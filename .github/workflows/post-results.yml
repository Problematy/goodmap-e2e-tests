name: Post E2E Test Results

on:
  workflow_run:
    workflows: ["E2E Tests"]
    types:
      - completed

permissions:
  contents: read
  pull-requests: write

jobs:
  post-results:
    if: github.event.workflow_run.conclusion != 'cancelled'
    uses: ./.github/workflows/pr-comment.yml
    permissions:
      contents: read
      pull-requests: write
    secrets: inherit
    with:
      run_id: ${{ github.event.workflow_run.id }}
